<p-fieldset>
    <ng-template pTemplate="header">
      <div>
        <i class="pi pi-users mr-2"></i>
        <span class="font-bold">Usuarios Trabajadores</span>
      </div>
    </ng-template>
  
    <div class="card flex flex-wrap justify-content-center gap-3">
      <p-iconField iconPosition="left">
        <p-inputIcon styleClass="pi pi-search" />
        <input
          type="text"
          pInputText
          placeholder="Buscar por nombre o cédula"
          [(ngModel)]="searchTerm"
        />
        <button pButton type="button" icon="pi pi-times" (click)="clearSearchTerm()"></button>
      </p-iconField>
  
      <p-iconField iconPosition="left">
        <p-dropdown 
          [options]="areaOptions" 
          [(ngModel)]="selectedArea" 
          placeholder="Filtrar por área">
        </p-dropdown>
        <button pButton type="button" icon="pi pi-times" (click)="clearSelectedArea()"></button>
      </p-iconField>
  
      <p-iconField iconPosition="left">
        <p-dropdown 
          [options]="cargoOptions" 
          [(ngModel)]="selectedCargo" 
          placeholder="Filtrar por cargo">
        </p-dropdown>
        <button pButton type="button" icon="pi pi-times" (click)="clearSelectedCargo()"></button>
      </p-iconField>
    </div>
  
    @if (loading) {
      <div class="loading-container p-d-flex p-jc-center p-ai-center p-flex-column">
        <p>Cargando usuarios...</p>
        <p-progressSpinner
          ariaLabel="loading"
          styleClass="w-4rem h-4rem"
          strokeWidth="8"
          fill="var(--surface-ground)"
        ></p-progressSpinner>
      </div>
    }
    @else { &nbsp;
    <p-table
      [value]="filterUsers(searchTerm, selectedArea, selectedCargo)"
      [tableStyle]=""
      [paginator]="true"
      [rows]="20"
      [rowsPerPageOptions]="[20, 30, 40, 50]"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Cédula</th>
          <th>Cargo</th>
          <th>Área</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user>
        <tr>
          <td>{{ user.id_usuario }}</td>
          <td>{{ user.tx_nombre }}</td>
          <td>{{ user.tx_cedula }}</td>
          <td>{{ user.tx_cargo }}</td>
          <td>{{ user.tx_area }}</td>
        </tr>
      </ng-template>
    </p-table>
    }
  </p-fieldset>
  