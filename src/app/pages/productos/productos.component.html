<p-fieldset>
  <ng-template pTemplate="header">
    <div>
      <i class="pi pi-shop mr-11"></i>
      <span class="font-bold">Productos</span>
    </div>
  </ng-template>
  <p-card>
    <div class="p-inputgroup p-d-flex p-jc-between p-ai-center p-mb-3">
      <div class="p-inputgroup p-d-flex p-ai-center">
        <span class="p-inputgroup-addon">
          <i class="pi pi-search"></i>
        </span>
        <input
          type="text"
          pInputText
          placeholder="Buscar por nombre"
          [(ngModel)]="searchTerm"
        />
        &nbsp; &nbsp;
        <button
          pButton
          label="Nuevo"
          icon="pi pi-plus"
          class="p-button-success mt-2"
          (click)="addProduct()"
        ></button>
      </div>
    </div>

    @if (loading) {
      <div class="loading-container p-d-flex p-jc-center p-ai-center p-flex-column">
        <p>Cargando productos...</p>
        <p-progressSpinner
          ariaLabel="loading"
          styleClass="w-4rem h-4rem"
          strokeWidth="8"
          fill="var(--surface-ground)"
        ></p-progressSpinner>
      </div>
    } @else {
      <p-table [value]="filteredProducts()" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th>ID</th>
            <th>Nombre del Producto</th>
            <th>Stock</th>
            <th>Acci√≥n</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
          <tr>
            <td>{{ product.id }}</td>
            <td>{{ product.nombre_producto }}</td>
            <td>{{ product.stock }}</td>
            <td>
              <button
                pButton
                type="button"
                icon="pi pi-pencil"
                class="p-button-rounded p-button-success p-mr-2"
                (click)="editProduct(product)"
              ></button>
              <button
                pButton
                type="button"
                icon="pi pi-trash"
                class="p-button-rounded p-button-danger"
                (click)="deleteProduct(product)"
              ></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    }
  </p-card>
</p-fieldset>