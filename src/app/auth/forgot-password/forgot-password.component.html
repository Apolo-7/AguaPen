<body>
  <div class="forgot-password-container flex flex-column align-items-center">
    <img src="assets/iconapp.webp" alt="Logo" />
    <h2>Recuperar Clave</h2>
    <form
      [formGroup]="forgotPasswordForm"
      (ngSubmit)="resetPassword()"
      class="w-full"
    >
      <div class="field">
        <label for="cedula">CÃ©dula:</label>
        <input
          pInputText
          type="text"
          id="cedula"
          formControlName="cedula"
          required
          class="w-full"
          [readonly]="cedulaVerificada"
          
        />
      </div>
      @if (!cedulaVerificada) {
        <div class="field">
          <p-button
        label="Verificar"
        icon="pi pi-check"
        (click)="verifyCedula()"
        class="p-button-secondary"
          [loading]="loadingCheck"
      
      ></p-button>
        </div>
       }
     @if (cedulaVerificada) {
      <ng-container >
        <div class="p-field">
          <label for="nueva_clave">Nueva Clave:</label>
          <input
            pPassword
            id="nueva_clave"
            type="password"
            formControlName="nueva_clave"
            required
            feedback="false"
            toggleMask="true"
            class="w-full"
          />
        </div>
        <div class="p-field">
          <label for="confirmar_clave">Confirmar Clave:</label>
          <input
            pPassword
            id="confirmar_clave"
            type="password"
            formControlName="confirmar_clave"
            required
            feedback="false"
            toggleMask="true"
            class="w-full"
          />
        </div>
      </ng-container>
     }
      <p-divider class="my-2"></p-divider>
      <div class="card flex justify-content-center gap-2">
        <p-button
          label="Recuperar"
          type="submit"
          icon="pi pi-key"
          [loading]="loading"
          class="p-button-primary w-full"
          [disabled]="!cedulaVerificada"
        ></p-button>
      </div>
    </form>
  </div>

  <p-toast
    [breakpoints]="{ '920px': { width: '100%', right: '0', left: '0' } }"
  ></p-toast>
</body>
